# Exercise 00 - $PATH

|                         |                    |
| -----------------------:| ------------------ |
|   Turn-in directory:    |  ex00              |
|   Files to turn in:     |  answers.txt, requirements.txt |
|   Forbidden functions:  |  None              |
|   Remarks:              |  n/a               |

The first thing you need is a proper working environment.

Most modern Unix-based system have a `python` interpreter installed by default, but its version might be lower/higher than the one used for these modules. It is also possible that the default `python` command uses a version 2.x (*for legacy reasons*). This is obviously very confusing for new developper.

```bash
$> python -V
$> python3 -V
```

To deal with those version issues we will use `conda`. This program allow you to manage your Python package and different working environments.

*Note: the actual requirement is to use a Python 3.7.X version. You are free to use a different program/utilities to achieve this goal. At your own risk.*


## Conda manual install

We recommend the following path for your `conda` folder.

``` bash
MYPATH="/goinfre/$USER/miniconda3"
```

**1. Download & Install conda**

```bash
# For MAC
curl -LO "https://repo.anaconda.com/miniconda/Miniconda3-latest-MacOSX-x86_64.sh"
sh Miniconda3-latest-MacOSX-x86_64.sh -h #Always RTFM
sh Miniconda3-latest-MacOSX-x86_64.sh -b -p $MYPATH

# For Linux
curl -LO "https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh"
sh Miniconda3-latest-Linux-x86_64.sh -h #Always RTFM
sh Miniconda3-latest-Linux-x86_64.sh -b -p $MYPATH
```

**2. Initial configuration of conda**


```bash
# For zsh
$MYPATH/bin/conda init -h # always RTFM
$MYPATH/bin/conda init zsh
$MYPATH/bin/conda config --set auto_activate_base false
source ~/.zshrc

# For bash
$MYPATH/bin/conda init -h # always RTFM
$MYPATH/bin/conda init bash
$MYPATH/bin/conda config --set auto_activate_base false
source ~/.bash_profile
```

**3. Create an environment for 42AI !**


```bash
conda info --envs
conda create --name 42AI-$USER python=3.7 jupyter numpy pandas pycodestyle
conda info --envs
```

**4. Check your 42AI Python environment**

```bash
conda activate 42AI-$USER
which python
python -V
python -c "print('Hello World!')"
conda deactivate
which python
python -V
```


### Help !
- I have lost my miniconda3 folder !

  Repeat step 1 and 3.

- I have lost my home directory !

  Repeat step 2.


## Conda automated install 

A way to install the entire environment is to define a bash function in your `~/.zshrc`.

1. Copy paste the following code into your `~/.zshrc`.

```bash
function set_conda {
    HOME=$(echo ~)
    INSTALL_PATH="/goinfre"
    MINICONDA_PATH=$INSTALL_PATH"/miniconda3/bin"
    PYTHON_PATH=$(which python)
    SCRIPT="Miniconda3-latest-MacOSX-x86_64.sh"
    REQUIREMENTS="jupyter numpy pandas pycodestyle"
    DL_LINK="https://repo.anaconda.com/miniconda/Miniconda3-latest-MacOSX-x86_64.sh"

    if echo $PYTHON_PATH | grep -q $INSTALL_PATH; then
	    echo "good python version :)"
    else
	cd
	if [ ! -f $SCRIPT ]; then
		curl -LO $DL_LINK
    	fi
    	if [ ! -d $MINICONDA_PATH ]; then
	    	sh $SCRIPT -b -p $INSTALL_PATH"/miniconda3"
	fi
	conda install -y $(echo $REQUIREMENTS)
	clear
	echo "Which python:"
	which python
	if grep -q "^export PATH=$MINICONDA_PATH" ~/.zshrc
	then
		echo "export already in .zshrc";
	else
		echo "adding export to .zshrc ...";
		echo "export PATH=$MINICONDA_PATH:\$PATH" >> ~/.zshrc
	fi
	source ~/.zshrc
    fi
}
```

By default, conda will be installed in the goinfre (look at the `INSTALL_PATH` variable). Feel free to change that path if you want to.

The function can be used whenever we want and will carry out the installation of miniconda and all needed librairies for the module. It will also add a line to export miniconda environment.

2. Source your `.zshrc` with the following command:

```bash
source ~/.zshrc
```

3. Use the function `set_conda`:

```bash
set_conda
```

When the installation is done rerun the `set_conda` function.

4. Check your Python path.

```bash
which python
```

Your Python should now be the one corresponding to the miniconda environment!

## Getting started

As an introduction, complete the following questionnaire using Python and `pip`, save your answers in a file `answers.txt` (write an answer per line in the text file), and check them with your peers.

Find the commands to:

1. Output a list of installed packages.

2. Output a list of installed packages and their versions.

3. Show the package metadata of `numpy`.

4. Search for PyPI packages whose name or summary contains "tesseract".

5. Freeze the packages and their current versions in a `requirements.txt` file you have to turn-in.
